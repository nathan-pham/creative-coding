<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link
            rel="icon"
            href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¯</text></svg>"
        />
        <title>Sketch 04: Pyramids</title>

        <link rel="stylesheet" href="/globals/style.css" />

        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.0/gsap.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
        <script src="/globals/utils.js"></script>
    </head>
    <body>
        <script>
            // initialize variables
            let palette = [],
                pyramid,
                sun;

            // p5.js setup function
            function setup() {
                createCanvas(500, 500);

                // initialize random palette
                palette = random(colors);

                // initialize sun
                sun = {
                    position: createVector(random(width), 100),
                };

                const leftSide = random(0, width / 2);
                const rightSide = leftSide + random(100, width / 2) + 150;

                const peak = random(leftSide, rightSide);

                // initialize pyramid
                pyramid = {
                    body: [
                        [leftSide, height],
                        [rightSide, height],
                        [peak, height / 2],
                    ],
                    shade:
                        sun.position.x > peak
                            ? [
                                  [leftSide, height],
                                  [leftSide - 50, height],
                                  [peak, height / 2],
                              ]
                            : [
                                  [rightSide, height],
                                  [rightSide + 50, height],
                                  [peak, height / 2],
                              ],
                };
            }

            // p5.js draw funtion
            function draw() {
                const [backgroundColor, sunColor, floorColor, shadeColor] =
                    palette;

                background(backgroundColor);

                noStroke();

                fill(sunColor);
                circle(sun.position.x, sun.position.y, 100);

                fill(sunColor);
                triangle(...pyramid.body.flat(Infinity));

                fill(shadeColor);
                triangle(...pyramid.shade.flat(Infinity));

                fill(floorColor);
                rect(0, height - 100, width, height - 100);
            }

            // p5.js save function
            // function mouseClicked() {
            //     saveCanvas("sketch_04", "jpg")
            // }

            // p5.js new sketch
            function keyPressed() {
                if (keyCode == 32) {
                    setup();
                }
            }
        </script>
    </body>
</html>
